<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Editar Pedido</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='editar_pedido.css') }}">
</head>
<body>
    <div class="header">
        <h1>Editar Pedido</h1>
        <nav>
            <a href="{{ url_for('dashboard.dashboard') }}">Dashboard</a>
            <a href="{{ url_for('pedidos.mostrar_pedidos') }}">Volver a Pedidos</a>
            <a href="{{ url_for('auth.confirmar_logout') }}">Cerrar sesión</a>
        </nav>
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <ul class="flash-messages">
                {% for category, message in messages %}
                    <li class="flash {{ category }}">{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    {% endwith %}

    <form method="POST" class="form-editar-pedido">
        <label for="fecha">Fecha</label>
        <input type="date" id="fecha" name="fecha" value="{{ pedido.fecha.strftime('%Y-%m-%d') if pedido.fecha }}" required>

        <label for="estado">Estado</label>
        <select id="estado" name="estado">
            <option value="pendiente" {% if pedido.estado == 'pendiente' %}selected{% endif %}>Pendiente</option>
            <option value="pagado" {% if pedido.estado == 'pagado' %}selected{% endif %}>Pagado</option>
            <option value="vencido" {% if pedido.estado == 'vencido' %}selected{% endif %}>Vencido</option>
        </select>

        <label for="monto_total">Monto total</label>
        <input type="number" step="0.01" min="0" max="1000000" id="monto_total" name="monto_total" value="{{ pedido.monto_total }}" required>

        <label for="observaciones">Observaciones</label>
        <textarea id="observaciones" name="observaciones" rows="4" cols="50">{{ pedido.observaciones }}</textarea>

        <button type="submit">Guardar cambios</button>
    </form>

    <div class="footer">
        &copy; {{ current_year|default('2025') }} Sistema de Gestión | Uriel Dev
    </div>
</body>
</html>