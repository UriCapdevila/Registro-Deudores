{% extends "base.html" %}

{% block title %}Panel Principal{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{{ url_for('static', filename='dashboard.css') }}">
{% endblock %}

{% block content %}
<section class="card">
    <h2>Total de clientes</h2>
    <p>{{ total_clientes }}</p>
</section>
<section class="card">
    <h2>Total de productos</h2>
    <p>{{ total_productos }}</p>
</section>
<section class="card">
    <h2>Total de ventas</h2>
    <p>{{ total_ventas }}</p>
</section>
<section class="card">
    <h2>Total de pagos</h2>
    <p>{{ total_pagos }}</p>
</section>

<section class="card">
    <h2>Ventas recientes</h2>
    <ul>
        {% for venta in ventas_recientes %}
            <li>
                Venta #{{ venta.id_venta }} - {{ venta.fecha|formatear_fecha }} - ${{ "%.2f"|format(venta.total) }}
            </li>
        {% endfor %}
    </ul>
</section>

<section class="card">
    <h2>Pagos recientes</h2>
    <ul>
        {% for pago in pagos_recientes %}
            <li>
                Pago #{{ pago.id_pago }} - {{ pago.fecha_pago|formatear_fecha }} - ${{ "%.2f"|format(pago.monto) }} -
                {{ estado_pago(pago) }}
            </li>
        {% endfor %}
    </ul>
    <p><strong>Total pagado:</strong> ${{ "%.2f"|format(calcular_total_pagos(pagos_recientes)) }}</p>
</section>
{% endblock %}